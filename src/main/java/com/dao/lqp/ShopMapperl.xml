<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.lqp.ShopDao">
	<select id="findall" resultType="com.entity.lqp.Shop">
		select * from Shop
	</select>
	<insert id="insert" parameterType="com.entity.Shop">
		insert into Shop(shopname,shopprice,tyshopno) values(#{shopname},#{shopprice},#{tyshop.tyshopno})
	</insert>
	<delete id="delete" parameterType="com.entity.Shop">
		delete from Shop where shopno = #{shopno}
	</delete>
	<update id="update" parameterType="com.entity.Shop">
		update Shop set shopname=#{shopname},shopprice=#{shopprice} where shopno = #{shopno}
	</update>
	
	<!-- 嵌套结果查询 -->
	<resultMap type="com.aaa.entity.Shop" id="getstudentresultMap">
		<id column="shopno" property="shopno" />
		<result column="shopname" property="shopname" />
		<result column="shopprice" property="shopprice" />
		<association property="tyshop" column="tyshopno"
			javaType="com.aaa.entity.Tyshop">
			<id column="tyshopno" property="tyshopno" />
			<result column="tyshopname" property="tyshopname" />
		</association>
	</resultMap>
	<select id="findall1" resultMap="getstudentresultMap">
		SELECT s.*,t.* FROM shop s left JOIN tyshop t on
		s.tyshopno=t.tyshopno
	</select> 
	<select id="findbyname" resultType="map">
		select * from Tyshop
	</select>
	<insert id="insert1" parameterType="com.aaa.entity.Shop">
		insert into Shop(shopname,shopprice,tyshopno) values(#{shopname},#{shopprice},#{tyshop.tyshopno})
	</insert>
	
	<delete id="delete1" parameterType="com.aaa.entity.Shop">
		delete from Shop where shopno = #{shopno}
	</delete>
	
	<update id="update1" parameterType="com.aaa.entity.Shop">
		update Shop set shopname=#{shopname},tyshopno=#{tyshop.tyshopno} where shopno = #{shopno}
	</update>
</mapper>